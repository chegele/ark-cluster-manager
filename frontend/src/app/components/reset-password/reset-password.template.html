<div id="backdrop" (click)="close()" *ngIf="show">
    <div class="content-box" (click)="$event.stopPropagation()">
        <div class="header">
            <h2 id="title">Reset Password</h2>
            <bootstrap-icon 
                id="closeIcon"
                preset="closeSquared" 
                color="var(--text-color-2)" 
                width="26px" 
                height="26px"
                (click)="close()">
            </bootstrap-icon>
        </div>
        <ul>
            <li class="errors" *ngFor="let err of errors">{{err}}</li>
            <li *ngIf="emailSent && !passwordReset">A verification key has been sent to your email address.</li>
        </ul>
        <div *ngIf="!emailSent && !loading && !passwordReset">
            <input-text-field inputType="username" [(value)]="usernameValue" [status]="usernameStatus"></input-text-field>
            <input-text-field inputType="email" [(value)]="emailValue" [status]="emailStatus"></input-text-field>
            <button (click)="sendVerification()">Send Verification Key</button>
        </div>
        <div *ngIf="emailSent && !loading && !passwordReset">
            <input-text-field inputType="key" [(value)]="keyValue" [status]="keyStatus"></input-text-field>
            <input-text-field inputType="password" placeholder="New Password" [(value)]="passwordValue" [status]="passwordStatus"></input-text-field>
            <button (click)="updatePassword()">Update Password</button>
        </div>
        <div *ngIf="passwordReset">
            <h3>Successfully updated the password.</h3>
        </div>
        <loading-animation [active]="loading" [width]="280"></loading-animation>
    </div>
</div>